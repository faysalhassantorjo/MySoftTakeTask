<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Order & Reservation API Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <style>
        body {
            background: #f4f6f9;
        }

        .sidebar {
            position: sticky;
            top: 0;
            height: 100vh;
            background: #111827;
        }

        .sidebar a {
            color: #cbd5f5;
            text-decoration: none;
            display: block;
            padding: 10px 14px;
            border-radius: 8px;
        }

        .sidebar a:hover {
            background: #1f2937;
            color: #fff;
        }

        .endpoint {
            font-family: monospace;
            background: #0f172a;
            color: #e5e7eb;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.9rem;
        }

        .section-card {
            border-radius: 16px;
            border: none;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.06);
        }

        .method {
            font-size: 0.75rem;
            letter-spacing: 0.05em;
        }

        pre {
            background: #020617;
            color: #e5e7eb;
            padding: 14px;
            border-radius: 10px;
            font-size: 0.85rem;
        }
    </style>
</head>

<body>

    <div class="container-fluid">
        <div class="row">

            <!-- SIDEBAR -->
            <aside class="col-md-3 col-lg-2 sidebar p-3">
                <h5 class="text-white mb-4">
                    <i class="bi bi-box-seam"></i> API Dashboard
                </h5>

                <a href="#overview"><i class="bi bi-info-circle"></i> Overview</a>
                <a href="#products"><i class="bi bi-bag"></i> Products</a>
                <a href="#reservations"><i class="bi bi-clock-history"></i> Reservations</a>
                <a href="#orders"><i class="bi bi-receipt"></i> Orders</a>
                <a href="#order-list"><i class="bi bi-funnel"></i> Order List</a>
                <a href="#order-detail"><i class="bi bi-pencil-square"></i> Order Update</a>
                <a href="#chaos"><i class="bi bi-lightning"></i> Chaos Test</a>
            </aside>

            <!-- MAIN CONTENT -->
            <main class="col-md-9 col-lg-10 p-4">

                <!-- OVERVIEW -->
                <section id="overview" class="mb-5">
                    <div class="card section-card">
                        <div class="card-body">
                            <h3 class="fw-semibold mb-3">System Overview</h3>
                            <p class="text-muted">
                                A transaction-safe order & reservation system built with
                                <strong>Django REST Framework</strong>, <strong>PostgreSQL</strong>,
                                <strong>Celery</strong>, and <strong>Celery Beat</strong>.
                            </p>

                            <div class="row mt-4">
                                <div class="col-md-6">
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item">‚úî Row-level locking & atomic transactions</li>
                                        <li class="list-group-item">‚úî Stock reservation with expiry</li>
                                        <li class="list-group-item">‚úî Safe concurrent access</li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item">‚úî Cursor pagination</li>
                                        <li class="list-group-item">‚úî Filter & sorting pipeline</li>
                                        <li class="list-group-item">‚úî Background cleanup tasks</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- PRODUCTS -->
                <section id="products" class="mb-5">
                    <div class="card section-card">
                        <div class="card-body">
                            <h4>
                                <i class="bi bi-bag"></i> Products
                                <span class="badge bg-success method">POST / GET</span>
                            </h4>

                            <p class="endpoint mt-2">
                                http://127.0.0.1:8000/api/create-products/
                            </p>

                            <p class="mt-3">
                                Create products and retrieve the available inventory.
                            </p>

                            <details>
                                <summary class="fw-semibold">Sample Request</summary>
                                <pre>{
  "name": "Wireless Mouse",
  "price": 1200,
  "stock": 50
}</pre>
                            </details>
                        </div>
                    </div>
                </section>

                <!-- RESERVATIONS -->
                <section id="reservations" class="mb-5">
                    <div class="card section-card">
                        <div class="card-body">
                            <h4>
                                <i class="bi bi-clock-history"></i> Reservations
                                <span class="badge bg-warning text-dark method">POST</span>
                            </h4>

                            <p class="endpoint mt-2">
                                http://127.0.0.1:8000/api/reservation/
                            </p>

                            <ul class="mt-3">
                                <li>‚è± Reserves stock for 10 minutes</li>
                                <li>üîí Uses <strong>select_for_update</strong></li>
                                <li>‚ö† Prevents overselling</li>
                            </ul>

                            <details>
                                <summary class="fw-semibold">Background Processing</summary>
                                <pre>
Celery Task:
- Marks reservation as EXPIRED
- Restores stock
- Runs via Celery Beat (periodic)
                            </pre>
                            </details>
                        </div>
                    </div>
                </section>

                <!-- ORDERS -->
                <section id="orders" class="mb-5">
                    <div class="card section-card">
                        <div class="card-body">
                            <h4>
                                <i class="bi bi-receipt"></i> Orders
                                <span class="badge bg-primary method">POST</span>
                            </h4>

                            <p class="endpoint mt-2">
                                http://127.0.0.1:8000/api/create-order/
                            </p>

                            <p>
                                Creates orders with order items. Price & quantity are demo fields
                                for filtering and sorting.
                            </p>
                        </div>
                    </div>
                </section>

                <!-- ORDER LIST -->
                <section id="order-list" class="mb-5">
                    <div class="card section-card">
                        <div class="card-body">
                            <h4>
                                <i class="bi bi-funnel"></i> Order List
                                <span class="badge bg-info text-dark method">GET</span>
                            </h4>

                            <p class="endpoint mt-2">
                                http://127.0.0.1:8000/api/order-list/
                            </p>

                            <div class="row mt-3">
                                <div class="col-md-4">
                                    <h6>Filters</h6>
                                    <ul>
                                        <li>Date range</li>
                                        <li>Status</li>
                                        <li>Min / Max total</li>
                                    </ul>
                                </div>
                                <div class="col-md-4">
                                    <h6>Sorting</h6>
                                    <ul>
                                        <li>Newest first</li>
                                        <li>Highest value</li>
                                    </ul>
                                </div>
                                <div class="col-md-4">
                                    <h6>Pagination</h6>
                                    <ul>
                                        <li>Cursor-based</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- ORDER DETAIL -->
                <section id="order-detail" class="mb-5">
                    <div class="card section-card">
                        <div class="card-body">
                            <h4>
                                <i class="bi bi-pencil-square"></i> Order Detail & Status Update
                                <span class="badge bg-secondary method">GET / PATCH</span>
                            </h4>

                            <p class="endpoint mt-2">
                                http://127.0.0.1:8000/api/order/1/
                            </p>

                            <ul class="mt-3">
                                <li>‚úî View order details</li>
                                <li>‚úî Update status</li>
                                <li>‚ùå Invalid transitions blocked</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- CHAOS -->
                <section id="chaos" class="mb-5">
                    <div class="card section-card">
                        <div class="card-body">
                            <h4>
                                <i class="bi bi-lightning"></i> Chaos & Concurrency Test
                            </h4>

                            <p class="endpoint mt-2">chaostest.py</p>

                            <p class="mt-3">
                                Simulates high-concurrency reservation attempts to validate:
                            </p>

                            <ul>
                                <li>Transaction isolation</li>
                                <li>Correct stock restoration</li>
                                <li>No race conditions</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <footer class="text-center text-muted mt-5">
                    <small>
                        Built with Django REST Framework ¬∑ Celery ¬∑ PostgreSQL
                    </small>
                </footer>

            </main>
        </div>
    </div>

</body>

</html>